import{d as J,r as x,A as H,c as w,k as F,o as c,a as d,e,t as l,F as O,l as D,q as m,u as I,w as M,C as P,m as T,b as V,p,B as W,D as Z,E as q,G as K}from"./index-Jjnt-glo.js";import{u as R,i as X,a as Y,b as _,c as tt,d as et,e as at,f as st,g as lt,h as nt,j as it,B as ot}from"./installCanvasRenderer-fLPfLOIj.js";const rt={key:0,class:"card mb-3"},ct={class:"card-body"},dt={class:"card-title"},ut={class:"table table-sm"},mt=e("th",null,"Team / Total",-1),ht=e("td",null,"Total",-1),vt=["href"],ft={class:"row"},yt={class:"col-sm-12 mb-2"},gt={class:"live-match"},bt={class:"match-ended"},xt={class:"unders-ended"},kt={class:"col-sm-6"},$t={key:0},wt={class:"ml18-BasketballClock_TimerInnerWrapper"},Ot={class:"col-sm-6"},Dt={class:"ovm-ParticipantStackedCentered_Odds"},St={class:"ovm-ParticipantStackedCentered_Odds"},At={class:"col-sm-8"},Ct=e("span",{class:"subtitle"},"Under histórico:",-1),It={class:"col-sm-4"},Mt={class:"graph"},Pt={class:"dialog-footer"},pt=J({__name:"MatchGraph",props:{match:{type:Object,required:!0,default:()=>null},name:{type:String,default:"chart"},bettingOdds:{type:Array,default:()=>[]}},setup(t){const B=t;R([X,Y,_,tt,et,at,st,lt,nt,it]);const k=x(!1),U=x({}),N=x({});x("");const $=x([]);H(()=>B.bettingOdds,()=>{$.value=Z(B.bettingOdds)},{deep:!0,immediate:!0});const z=w(()=>$.value.map(a=>a.quarter+" "+q(a.millis))),v=w(()=>$.value.map(a=>({value:a.value,scores:a.scores}))),L=w(()=>j()),Q=w(()=>({title:{text:""},tooltip:{trigger:"axis",formatter:a=>`<div class="bet-tooltip">
            ${a[0].axisValue}<br/>${a[0].data.scores?a[0].data.scores.join("-"):"-"}<br/>
            <span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:#5470c6;"></span>
            <span style="float:right;margin-left:10px;color:#666;font-weight:900">${a[0].data.value}</span>
             </div>`},legend:{},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:z.value},yAxis:{type:"value",axisLabel:{formatter:"{value} pts"},min:v.value.length>0?Math.min(...v.value.map(a=>a.value))-3:0,max:v.value.length>0?Math.max(...v.value.map(a=>a.value))+3:0,interval:5},series:[{type:"line",emphasis:{focus:"series"},data:v.value,smooth:!0,markPoint:{data:[{type:"max",name:"Max"},{type:"min",name:"Min"}]},markLine:{lineStyle:{type:"dotted"},data:L.value.map(a=>({xAxis:a.quarter+" "+q(a.millis),name:a.quarter,label:{formatter:a.quarter,position:"end"},position:"end"}))}}]}));function E(a,o,{returnMsg:u=!1,sendAlert:f=!1}={}){a.externalId;const s=a.history;if(U.value[a.externalId]=s,s&&o){let i=[],y=0,h=0;for(let C=0;C<s.length;C++){let[g,b]=s[C].resultScore.split(":");g=parseInt(g),b=parseInt(b),i.push(g+b),y+=g+b,g+b<o&&h++}const r=y/s.length,n=(h/i.length*100).toFixed(2),S=i.length,A=h;let G={underPercent:n,totalAvg:r,totalQty:S,underQty:A};return N.value=JSON.parse(JSON.stringify(G)),u?`En el ${n}% (${A} de los últimos ${S} partidos) el score final fue menor a ${o}`:{underPercent:n,totalAvg:r,totalQty:S,underQty:A}}}function j(){let a,o,u,f,s,i,y,h;for(const r of $.value){let n=r.quarter;n!=="0"&&(!a&&n&&(a=n,s=r),!o&&n!==a&&(o=n,i=r),!u&&n!==a&&n!==o&&(u=n,y=r),!f&&n!==a&&n!==o&&n!==u&&(f=n,h=r))}return[s,i,y,h].filter(r=>r).map(r=>({...r,date:r.date}))}return(a,o)=>{const u=F("el-button"),f=F("el-dialog");return t.match&&t.match.teams?(c(),d("div",rt,[e("div",ct,[e("h5",dt,l(`${t.match.teams[0].name} (${t.match.scoresDetailed.home}) - (${t.match.scoresDetailed.away}) ${t.match.teams[1].name}`),1),e("table",ut,[e("thead",null,[e("tr",null,[mt,(c(!0),d(O,null,D(t.match.periods,(s,i)=>(c(),d("th",{key:i},l(i),1))),128))])]),e("tbody",null,[e("tr",null,[e("td",null,l(t.match.teams[0].name),1),(c(!0),d(O,null,D(t.match.periods,(s,i)=>(c(),d("td",{key:i+"-home"},l(s.home),1))),128))]),e("tr",null,[e("td",null,l(t.match.teams[1].name),1),(c(!0),d(O,null,D(t.match.periods,(s,i)=>(c(),d("td",{key:i+"-away"},l(s.away),1))),128))]),e("tr",null,[ht,(c(!0),d(O,null,D(t.match.periods,(s,i)=>(c(),d("td",{key:i+"-total"},l(s.home+s.away),1))),128))])])]),e("h6",null,"ID: "+l(t.match._id),1),e("h6",null,[e("a",{href:`/matches/${t.match._id}`,target:"_blank"},l(t.match.externalId),9,vt),m(" - "+l(I(K)(t.match.createdAt)),1)]),e("div",ft,[e("div",yt,[M(e("span",gt,"LIVE",512),[[P,t.match.basketClock!==0]]),M(e("span",bt,"Juego Finalizado",512),[[P,t.match.isMatchOver]]),M(e("span",xt,"Under Finalizado",512),[[P,t.match.isUnderOver&&!t.match.isMatchOver]])]),e("div",kt,[e("h6",null," Total: "+l(t.match.scoresDetailed.home+t.match.scoresDetailed.away),1),t.match.underScore?(c(),d("h6",$t," Para alcanzar valor under: "+l(t.match.underScore-(t.match.scoresDetailed.home+t.match.scoresDetailed.away)),1)):T("",!0),e("h6",null,[m(" Tiempo: "),e("span",wt,l(t.match.quarter)+" "+l(I(q)(t.match.basketClock)),1)])]),e("div",Ot,[e("h6",null,[m(" O "+l(t.match.underScore||"Finalizado")+" ",1),e("span",Dt,l(t.match.overQuota),1)]),e("h6",null,[m(" U "+l(t.match.underScore||"Finalizado")+" ",1),e("span",St,l(t.match.underQuota),1)])]),e("div",At,[Ct,m(" "+l(E(t.match,t.match.unders.length>0?t.match.unders[t.match.unders.length-1].value:0,{returnMsg:!0,sendAlert:!0})),1)]),e("div",It,[V(u,{small:"",type:"success",plain:""},{default:p(()=>[m("Predecir under")]),_:1})])]),e("div",Mt,[V(I(ot),{class:"chart item",option:Q.value},null,8,["option"])])]),k.value?(c(),W(f,{key:0,modelValue:k.value,"onUpdate:modelValue":o[1]||(o[1]=s=>k.value=s),title:`${t.match.teams[0].name} - ${t.match.teams[1].name}`,width:"30%"},{footer:p(()=>[e("span",Pt,[V(u,{type:"primary",onClick:o[0]||(o[0]=s=>k.value=!1)},{default:p(()=>[m("Listo!")]),_:1})])]),_:1},8,["modelValue","title"])):T("",!0)])):T("",!0)}}});export{pt as _};
