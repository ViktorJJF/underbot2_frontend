import{d as O,y as k,f as j,j as q,g as E,r as e,c as w,z as C,h as I,M as R,k as r,o as c,a as i,e as m,b as p,n as M,p as $,F as b,l as B,A as P,t as U}from"./index-1x2_oIEt.js";import{_ as G}from"./MatchGraph.vue_vue_type_script_setup_true_lang-c9W6FR1E.js";import"./installCanvasRenderer-FqoLGLL-.js";const H={class:"container py-1"},J={class:"row"},K={class:"mt-3"},Q={class:"row mt-3"},te=O({__name:"MatchesView",setup(W){k("$formatDate"),k("$deepCopy");const v=j(),T=q(),V=E(),_=e([]);e({});const f=e(1);e(0);const x=e(["name"]),h=e("");e(!1);const g=e(null),A=e(-1),y=e(["NBA","NCAAB"]),l=e([]);e(null),e(null);const u=e(new Date);e(!1),w(()=>A.value===-1?"Crear match":"Editar match");const S=w(()=>v.state.matchesModule.new_odd);C(h,()=>{clearTimeout(g.value),g.value=setTimeout(()=>{f.value=1,d(f.value)},600)}),C(S,s=>{const{matchId:a,bettingOdds:o}=s;_.value.find(n=>n._id===a)},{deep:!0}),I(()=>{d()});async function d(s=1){var o;l.value.length&&V.push({query:{leagues:l.value}});let a={page:f.value||s,search:h.value,fieldsToSearch:x.value,sort:"createdAt",order:"desc",limit:15,dateFrom:u.value,dateTo:u.value,leagues:(o=T.query)==null?void 0:o.leagues};R.listLeagues(!0).then(n=>{y.value=n.data.payload}),await Promise.all([v.dispatch("matchesModule/list",a)]),_.value=v.state.matchesModule.matches}function L(){d()}function N(){window.open("/matches?leagues=all","_self")}function D(s){l.value.includes(s)?l.value=l.value.filter(a=>a!==s):l.value.push(s),d()}return(s,a)=>{const o=r("el-button"),n=r("el-date-picker"),z=r("el-tag"),F=r("el-divider");return c(),i("div",null,[m("div",H,[p(o,{class:"my-2",type:"primary",onClick:N},{default:M(()=>[$("Mostrar todas las ligas")]),_:1}),m("div",J,[p(n,{onChange:a[0]||(a[0]=t=>L()),modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=t=>u.value=t),type:"date",placeholder:"Selecciona un dÃ­a",size:"large"},null,8,["modelValue"])]),m("div",K,[(c(!0),i(b,null,B(y.value,t=>(c(),P(z,{key:t,class:"mx-1 leagues-selector mb-2",effect:"dark",type:l.value.includes(t)?"success":"info",round:"",onClick:X=>D(t)},{default:M(()=>[$(U(t),1)]),_:2},1032,["type","onClick"]))),128)),p(F)]),m("div",Q,[(c(!0),i(b,null,B(_.value,t=>(c(),i("div",{class:"col-sm-6",key:t._id},[p(G,{match:t,bettingOdds:t.odds},null,8,["match","bettingOdds"])]))),128))])])])}}});export{te as default};
