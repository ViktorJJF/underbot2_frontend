import{d as G,z as T,f as H,j as J,g as K,r as t,c as q,A as S,h as Q,M as x,k as c,o as d,a as r,e as m,b as v,p as b,q as O,F as k,B as L,l as w,t as W}from"./index-Jjnt-glo.js";import{_ as X}from"./MatchGraph.vue_vue_type_script_setup_true_lang-ZlkSpH9C.js";import"./installCanvasRenderer-fLPfLOIj.js";const Y={class:"container py-1"},Z={class:"col-sm-3"},ee={class:"row"},ae={class:"mt-3"},te={class:"row mt-3"},ue=G({__name:"MatchesView",setup(le){T("$formatDate"),T("$deepCopy");const f=H(),n=J(),h=K(),p=t([]);t({});const g=t(1);t(0);const A=t(["name"]),B=t("");t(!1);const C=t(null),D=t(-1),V=t([]),M=t([]),o=t("Totales (incl. prórroga)"),s=t(["NBA"]);t(null),t(null);const _=t(new Date);t(!1),q(()=>D.value===-1?"Crear match":"Editar match");const $=q(()=>f.state.matchesModule.new_odd);S(B,()=>{clearTimeout(C.value),C.value=setTimeout(()=>{g.value=1,i(g.value)},600)}),S($,l=>{const{matchId:a,bettingOdds:u}=l;p.value.find(y=>y._id===a)},{deep:!0}),Q(()=>{var l,a;(l=n==null?void 0:n.query)!=null&&l.leagues&&(s.value=n.query.leagues),(a=n==null?void 0:n.query)!=null&&a.bet_name&&(o.value=n.query.bet_name),h.push({query:{leagues:s.value,bet_name:o.value}}),i()});async function i(l=1){let a={page:g.value||l,search:B.value,fieldsToSearch:A.value,sort:"createdAt",order:"desc",limit:15,dateFrom:_.value,dateTo:_.value,leagues:s.value,betName:o.value};await Promise.all([f.dispatch("matchesModule/list",a)]),p.value=f.state.matchesModule.matches,x.listLeagues(!0).then(u=>{V.value=u.data.payload}),x.listBetNames(!0,p.value.map(u=>u._id)).then(u=>{M.value=u.data.payload})}function z(){i()}function F(){window.open("/matches?leagues=all","_self")}function j(l){s.value.includes(l)?s.value=s.value.filter(a=>a!==l):s.value.push(l),s.value.length&&h.push({query:{leagues:s.value,bet_name:o.value}}),i()}function E(l){o.value&&h.push({query:{bet_name:o.value,leagues:s.value}}),o.value=l,i()}return(l,a)=>{const u=c("el-button"),y=c("el-option"),I=c("el-select"),R=c("el-date-picker"),U=c("el-tag"),P=c("el-divider");return d(),r("div",null,[m("div",Y,[v(u,{class:"my-2",type:"primary",onClick:F},{default:b(()=>[O("Mostrar todas las ligas")]),_:1}),m("div",Z,[v(I,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e),placeholder:"Tipo de apuesta",onChange:a[1]||(a[1]=e=>E(e)),clearable:""},{default:b(()=>[(d(!0),r(k,null,w(M.value,(e,N)=>(d(),L(y,{key:N,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),m("div",ee,[v(R,{onChange:a[2]||(a[2]=e=>z()),modelValue:_.value,"onUpdate:modelValue":a[3]||(a[3]=e=>_.value=e),type:"date",placeholder:"Selecciona un día",size:"large"},null,8,["modelValue"])]),m("div",ae,[(d(!0),r(k,null,w(V.value,e=>(d(),L(U,{key:e,class:"mx-1 leagues-selector mb-2",effect:"dark",type:s.value.includes(e)?"success":"info",round:"",onClick:N=>j(e)},{default:b(()=>[O(W(e),1)]),_:2},1032,["type","onClick"]))),128)),v(P)]),m("div",te,[(d(!0),r(k,null,w(p.value,e=>(d(),r("div",{class:"col-sm-6",key:e._id},[v(X,{match:e,bettingOdds:e.odds},null,8,["match","bettingOdds"])]))),128))])])])}}});export{ue as default};
